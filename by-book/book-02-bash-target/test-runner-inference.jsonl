{"cluster_id": "test-runner-inference", "seed_level": 2, "source_files": ["education/book-02-bash-target/08_test_runner_inference.md", "src/unifyweaver/core/advanced/test_runner_inference.pl"], "topics": ["testing", "automatic", "inference", "test-generation"], "questions": ["How does UnifyWeaver generate tests automatically?", "What is test runner inference?", "How do I generate a test script for my compiled code?", "What is automatic test discovery?"], "answer": {"text": "## Test Runner Inference\n\nUnifyWeaver can automatically generate test scripts by analyzing compiled Bash code.\n\n### The Problem\n\nManual testing is tedious:\n- Must track all generated scripts\n- Need to know function arities\n- Easy to forget functions\n- Adding predicates requires updating tests\n\n### The Solution: Automatic Discovery\n\n```prolog\n% One command generates complete test suite\n?- generate_test_runner_inferred.\nGenerated test runner: output/advanced/test_runner.sh\n```\n\n### How It Works\n\n1. **Scan** output directory for `.sh` files\n2. **Extract** function signatures (name, arity, pattern type)\n3. **Infer** appropriate test cases\n4. **Generate** complete test runner script\n\n### Usage\n\n```prolog\n% Load module\n?- use_module(unifyweaver(core/advanced/test_runner_inference)).\n\n% Generate with defaults\n?- generate_test_runner_inferred.\n\n% Specify output path\n?- generate_test_runner_inferred('my_tests.sh').\n\n% Use concise mode\n?- generate_test_runner_inferred('tests.sh', [mode(concise)]).\n\n% Scan different directory\n?- generate_test_runner_inferred('tests.sh', [output_dir('output/basic')]).\n```\n\n### Running Generated Tests\n\n```bash\n$ bash output/advanced/test_runner.sh\n\n=== Testing Generated Bash Scripts ===\n\n--- Testing factorial.sh ---\nTest 1: Base case 0\n0:1\n\nTest 2: Larger value\n5:120\n\n--- Testing list_length.sh ---\nTest 1: Empty list\n[]:0\n\n=== All Tests Complete ===\n```\n\n### Output Modes\n\n| Mode | Description |\n|------|-------------|\n| explicit | One test block per file (default, readable) |\n| concise | Loop-based with arrays (compact) |\n| hybrid | Smart selection based on complexity |", "anchor_question_hash": "f8a9b0c1d2e34567"}}
{"cluster_id": "test-inference-heuristics", "seed_level": 3, "source_files": ["education/book-02-bash-target/08_test_runner_inference.md", "src/unifyweaver/core/advanced/test_runner_inference.pl"], "topics": ["heuristics", "test-cases", "inference-rules"], "questions": ["How does UnifyWeaver decide what tests to generate?", "What heuristics are used for test inference?", "How are test cases inferred from function signatures?", "What test patterns does UnifyWeaver recognize?"], "answer": {"text": "## Test Inference Heuristics\n\nUnifyWeaver uses multiple heuristics to generate appropriate tests.\n\n### Heuristic 1: Name-Based\n\n| Function Name Contains | Inferred Tests |\n|------------------------|----------------|\n| `length`, `list` | `[]`, `[a]`, `[a,b,c]` |\n| `factorial`, `fib`, `power` | `0`, `1`, `5` |\n| `sum`, `add` | `[]`, `[1,2,3]`, `[5,10,15]` |\n| `tree`, `binary` | `[]`, `[5,[],[]]`, nested tree |\n| `is_even`, `even` | `0`, `4`, `3` (should fail) |\n| `is_odd`, `odd` | `3`, `5`, `6` (should fail) |\n\n### Heuristic 2: Pattern-Based\n\n| Pattern Type | Inferred Tests |\n|--------------|----------------|\n| `tail_recursive` | Accumulator tests with initial 0 |\n| `linear_recursive` | Check name for specific patterns |\n| `mutual_recursive` | Complementary tests (even/odd) |\n| `tree_recursive` | Structural tests (empty, single, nested) |\n\n### Heuristic 3: Arity-Based\n\n| Arity | Typical Pattern | Test Structure |\n|-------|-----------------|----------------|\n| 1 | Unary predicates | Single argument |\n| 2 | Binary relations | Input + output (empty string) |\n| 3 | Accumulators | Input + acc(0) + output |\n\n### Example Inference\n\n```prolog\n% Signature extracted from factorial.sh\nfunction(factorial, 2, metadata(\n    pattern_type(linear_recursive),\n    description('fold-based linear recursion'),\n    file_path('factorial.sh')\n))\n```\n\n**Inferred tests:**\n- Name contains `factorial` -> numeric tests\n- Pattern is `linear_recursive` -> check name\n- Arity is 2 -> input + output\n\n**Result:**\n```bash\nfactorial \"0\" \"\"\nfactorial \"1\" \"\"\nfactorial \"5\" \"\"\n```", "anchor_question_hash": "a9b0c1d2e3f45678"}}
