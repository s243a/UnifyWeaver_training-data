{"cluster_id": "prolog-firewall-001", "question": "How does the firewall integrate with the Prolog target?", "answer": "The firewall controls code generation at multiple points:\n\n**1. Dialect Selection:**\n```prolog\n:- allow(prolog_target(swi)).\n:- disallow(prolog_target(gnu)).\n```\n\n**2. Compilation Control:**\n```prolog\n:- disallow(compile(native)).\n```\n\n**3. Module Imports:**\n```prolog\n:- allow(import_module(library(lists))).\n:- disallow(import_module(library(http/_))).\n```\n\n**Firewall modes:**\n- `guidance` - Warn but allow\n- `enforce` - Block violations\n- `audit` - Log everything\n\n**Policy file example (.firewall):**\n```prolog\n:- firewall_mode(enforce).\n:- allow(prolog_target(swi)).\n:- disallow(network_access).\n:- require(validation(strict)).\n```", "source_file": "book-11-prolog-target/07_firewall_integration.md", "prerequisites": ["prolog-target-001", "firewall-001"]}
{"cluster_id": "prolog-fallback-001", "question": "How does the Prolog target handle compilation failures?", "answer": "The `compile_script_safe/3` predicate provides graceful fallback:\n\n```prolog\ncompile_script_safe(Dialect, ScriptPath, Options) :-\n    catch(\n        compile_script(Dialect, ScriptPath),\n        error(compilation_failed(FailedDialect, ExitCode), _),\n        (   option(fail_on_compile_error(true), Options)\n        ->  throw(...)  % Strict mode: re-throw\n        ;   % Default: continue with interpreted\n            format('[PrologTarget] WARNING: ~w compilation failed~n', [FailedDialect]),\n            format('[PrologTarget] Continuing with interpreted script~n')\n        )\n    ).\n```\n\n**Fallback strategies:**\n1. **Silent fallback** (default): Log warning, use interpreted script\n2. **Strict mode**: `fail_on_compile_error(true)` - throw on failure\n3. **Multi-dialect** (v0.2): Try alternatives in preference order\n\nThe script remains usable interpreted even if compilation fails.", "source_file": "book-11-prolog-target/08_fallback_mechanisms.md", "prerequisites": ["prolog-target-001"]}
{"cluster_id": "prolog-fallback-001", "question": "What fallback strategies does the Prolog target support?", "answer": "**Current (v0.1):**\n\n1. **Compilation Fallback**: If `gplc` fails, continue with interpreted script\n2. **Firewall Fallback**: If dialect blocked, try allowed alternatives\n\n**Planned (v0.2):**\n\n1. **Multi-Dialect Chains:**\n```prolog\n[dialects([gnu, swi]), compile(true), fallback(auto)]\n% Try: GNU compiled → GNU interpreted → SWI interpreted\n```\n\n2. **Capability-Based Fallback:**\n```prolog\n?- validate_for_dialect(gnu, [my_pred/2], Issues).\n% If Issues, automatically switch to compatible dialect\n```\n\n3. **Feature Degradation:**\n```prolog\n[fallback(degrade)]  % Remove unsupported features, continue\n```\n\n4. **Automatic Dialect Selection:**\n```prolog\n[dialect(auto)]  % Analyze code, pick best dialect\n```", "source_file": "book-11-prolog-target/08_fallback_mechanisms.md", "prerequisites": ["prolog-fallback-001"]}
