{"pair_id": "prolog-target-001_p0", "cluster_id": "prolog-target-001", "question": "What is the Prolog target and why transpile Prolog to Prolog?", "question_type": "medium", "answer": "The Prolog target transpiles Prolog to Prolog to bridge dialect differences and add UnifyWeaver capabilities. While this seems circular, it serves several practical purposes:\n\n**Dialect Compatibility**: Translates between SWI-Prolog and GNU Prolog syntax, handling differences in initialization directives, module systems, and built-in predicates.\n\n**Automatic Dependency Management**: Injects required UnifyWeaver modules like partitioners and data sources into the generated code, eliminating manual imports.\n\n**Deployment Flexibility**: Produces either interpreted scripts or compiled executables (using GNU Prolog's `gplc` compiler), depending on your needs.\n\n**Security Integration**: Applies firewall policies to control what code gets generated and executed.\n\nExample usage:\n```prolog\n:- use_module('src/unifyweaver/targets/prolog_target').\n\n?- generate_prolog_script([factorial/2],\n                         [dialect(gnu), compile(true)],\n                         Code),\n   write_prolog_script(Code, 'factorial', [dialect(gnu), compile(true)]).\n```\n\nFor more on UnifyWeaver's target architecture, see education/book-11-prolog-target/.", "answer_variant": "default", "answer_source": "book-11-prolog-target/01_introduction.md", "topics": [], "original_answer": "The Prolog target converts Prolog source into executable Prolog scripts for different dialects. Key purposes:\n\n**1. Dialect Translation**: Handle differences between SWI-Prolog and GNU Prolog (initialization, modules, built-ins)\n\n**2. Dependency Injection**: Automatically include required UnifyWeaver modules (partitioners, data sources)\n\n**3. Compilation Support**: Generate interpreted scripts or compiled binaries via GNU Prolog's `gplc`\n\n**4. Security**: Integration with firewall policies for code generation control\n\n```prolog\n:- use_module('src/unifyweaver/targets/prolog_target').\n\n?- generate_prolog_script([factorial/2],\n                         [dialect(gnu), compile(true)],\n                         Code),\n   write_prolog_script(Code, 'factorial', [dialect(gnu), compile(true)]).\n```", "answer_tailored": true}
{"pair_id": "prolog-target-001_p0", "cluster_id": "prolog-target-001", "question": "What is the Prolog target generation pipeline?", "question_type": "medium", "answer": "The Prolog target uses an 8-phase generation pipeline coordinated by `generate_prolog_script/3`:\n\n**Phase 1 - Dialect Selection**: Validates and selects the target Prolog dialect using `option(dialect(D), Options, swi)` (defaults to SWI-Prolog)\n\n**Phase 2 - Dependency Analysis**: Calls `analyze_dependencies(Predicates, Deps)` to determine required modules and libraries\n\n**Phase 3 - Shebang Generation**: Produces dialect-appropriate shebang via `dialect_shebang(Dialect, Shebang)`\n\n**Phase 4 - Header Comments**: Generates metadata and documentation headers\n\n**Phase 5 - Import Statements**: Uses `dialect_imports(Dialect, Deps, Imports)` to create dialect-specific import directives\n\n**Phase 6 - Code Transpilation**: Extracts and transforms user-defined predicate definitions\n\n**Phase 7 - Entry Point**: Generates the main entry predicate through `generate_main_predicate(Options, Main)`\n\n**Phase 8 - Initialization**: Applies `dialect_initialization(Dialect, Goal, Opts, Init)` to set up runtime initialization\n\nThe pipeline is implemented across three modules: `prolog_target.pl` (orchestration), `prolog_dialects.pl` (dialect-specific generation), and `prolog_service_target.pl` (service layer integration). For implementation details, see education/book-11-prolog-target/02_architecture.md.", "answer_variant": "default", "answer_source": "book-11-prolog-target/02_architecture.md", "topics": [], "original_answer": "The `generate_prolog_script/3` pipeline has 8 steps:\n\n1. **Dialect Selection**: Validate `option(dialect(D), Options, swi)`\n2. **Dependency Analysis**: `analyze_dependencies(Predicates, Deps)`\n3. **Shebang Generation**: `dialect_shebang(Dialect, Shebang)`\n4. **Header Generation**: Metadata comments\n5. **Import Generation**: `dialect_imports(Dialect, Deps, Imports)`\n6. **User Code Transpilation**: Extract predicate definitions\n7. **Entry Point Generation**: `generate_main_predicate(Options, Main)`\n8. **Initialization Code**: `dialect_initialization(Dialect, Goal, Opts, Init)`\n\nThree core modules:\n- `prolog_target.pl` - Main orchestrator\n- `prolog_dialects.pl` - Dialect-specific code generation\n- `prolog_service_target.pl` - Service integration", "answer_tailored": true}
