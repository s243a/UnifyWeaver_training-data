{"cluster_id": "semantic-dist-001", "question": "How does distributed semantic search work in UnifyWeaver?", "answer": "Multi-interface nodes with Kleinberg routing:\n\n**Architecture:**\n```\n┌─────────────────────────────────┐\n│     Expert System (Node)        │\n│  ┌─────────┐ ┌─────────┐        │\n│  │Interface│ │Interface│ ...    │\n│  │  \"CSV\"  │ │ \"JSON\" │        │\n│  │centroid │ │centroid│        │\n│  └─────────┘ └─────────┘        │\n│        Shared KG Database       │\n└─────────────────────────────────┘\n```\n\n**Kleinberg routing protocol:**\n- Greedy forwarding to node with highest similarity\n- HTL (Hops-To-Live) prevents infinite loops\n- Path folding creates shortcuts for future queries\n\n```python\nrouter = KleinbergRouter(\n    discovery_client=create_discovery_client('consul'),\n    alpha=2.0, max_hops=10, path_folding_enabled=True\n)\nresults = router.route_query(query_embedding, envelope, top_k=5)\n```\n\nProper small-world structure achieves O(log²n) path length.", "source_file": "book-13-semantic-search/06_distributed_search.md", "prerequisites": ["semantic-001"]}
{"cluster_id": "semantic-dist-001", "question": "How does federated query aggregation handle source diversity?", "answer": "Results from multiple nodes need diversity-aware aggregation:\n\n**The problem:** Two nodes trained on the same dataset returning similar answers - is that consensus or echo?\n\n**3-Tier diversity model:**\n```python\ndef _diversity_merge(self, existing_score, new_score, existing_prov, new_prov):\n    # Tier 1: Different corpus = full independence = SUM\n    if existing_prov.corpus_id != new_prov.corpus_id:\n        return existing_score + new_score\n    \n    # Tier 2: Same corpus, disjoint sources = partial boost\n    if not existing_prov.data_sources.intersection(new_prov.data_sources):\n        return (existing_score + new_score + max(existing_score, new_score)) / 2\n    \n    # Tier 3: Overlapping sources = echo = MAX only\n    return max(existing_score, new_score)\n```\n\n**Prolog config:**\n```prolog\nfederation_k(5), aggregation(diversity), consensus_threshold(3)\n```", "source_file": "book-13-semantic-search/06_distributed_search.md", "prerequisites": ["semantic-dist-001"]}
