{"cluster_id": "b7-c3-target-registry", "seed_level": 2, "source_files": ["education/book-07-cross-target-glue/03_target_registry.md"], "topics": ["target-registry", "declare-target", "target-mapping"], "questions": ["What is the target registry?", "How do I declare a target for a predicate?", "What is declare_target/3?"], "answer": {"text": "## Target Registry\n\nThe target registry manages target metadata, runtime families, and predicate mappings.\n\n### API\n\n```prolog\n:- module(target_registry, [\n    register_target/3,      % Register a new target\n    target_family/2,        % Query target's family\n    targets_same_family/2,  % Check family membership\n    default_location/2,     % Default location for target\n    default_transport/3     % Default transport between locations\n]).\n```\n\n### Declaring Targets\n\n```prolog\n% Basic declaration\n:- declare_target(analyze/2, python).\n\n% With options\n:- declare_target(analyze/2, python, [\n    format(json),\n    location(local_process),\n    timeout(30)\n]).\n```\n\n### Built-in Families\n\n| Family | Targets |\n|--------|--------|\n| shell | bash, awk, sed, perl |\n| dotnet | csharp, powershell, ironpython |\n| native | go, rust, c |", "anchor_question_hash": "b7c3001a"}}
{"cluster_id": "b7-c3-location-resolution", "seed_level": 3, "source_files": ["education/book-07-cross-target-glue/03_target_registry.md"], "topics": ["location", "transport", "resolution"], "questions": ["How does location resolution work?", "What is declare_location/2?", "How do I specify remote execution?"], "answer": {"text": "## Location and Transport Resolution\n\n### Location Declarations\n\n```prolog\n% Force remote execution\n:- declare_location(heavy_compute/2, [\n    host('gpu-worker.local'),\n    port(8080),\n    transport(http)\n]).\n\n% Force separate process\n:- declare_location(memory_hungry/2, [\n    process(separate)\n]).\n```\n\n### Resolution Rules\n\n1. **Same family, local** → In-process (if supported)\n2. **Different family, local** → Pipes\n3. **Remote** → HTTP/socket\n\n### Override Hierarchy\n\n```prolog\n% Level 1: Just works (defaults)\n:- declare_target(analyze/2, python).\n\n% Level 2: Specify format\n:- declare_target(analyze/2, python, [format(json)]).\n\n% Level 3: Full control\n:- declare_target(analyze/2, python, [\n    format(json), location(local_process), timeout(30), retry(3)\n]).\n```", "anchor_question_hash": "b7c3002a"}}
