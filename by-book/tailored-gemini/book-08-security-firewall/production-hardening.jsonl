{"pair_id": "production-001_p0", "cluster_id": "production-001", "question": "How do I configure TLS for UnifyWeaver services?", "question_type": "medium", "answer": "To configure TLS for UnifyWeaver services, you specify security parameters directly within the service declaration and use dedicated configuration predicates. This setup ensures that transport-level encryption is enforced across your architecture.\n\n```prolog\n:- declare_service(api_service, [\n    host('api.example.com'),\n    port(8443),\n    transport(https),\n    tls_version('1.3'),\n    cert_file('/etc/ssl/cert.pem'),\n    key_file('/etc/ssl/key.pem')\n]).\n\n:- declare_tls_config(production, [\n    min_version('1.2'),\n    preferred_version('1.3'),\n    cipher_suites(['TLS_AES_256_GCM_SHA384']),\n    verify_peer(true)\n]).\n```\n\nUnifyWeaver enforces these security standards by causing validation failures for any remote services that attempt to operate without HTTPS. For comprehensive details on securing your environment, see the hardening guidelines in `education/book-08-security-firewall/06_production_hardening.md`.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Configure TLS in service declaration and with dedicated predicates:\n\n```prolog\n:- declare_service(api_service, [\n    host('api.example.com'),\n    port(8443),\n    transport(https),\n    tls_version('1.3'),\n    cert_file('/etc/ssl/cert.pem'),\n    key_file('/etc/ssl/key.pem')\n]).\n\n:- declare_tls_config(production, [\n    min_version('1.2'),\n    preferred_version('1.3'),\n    cipher_suites(['TLS_AES_256_GCM_SHA384']),\n    verify_peer(true)\n]).\n```\n\nRemote services without HTTPS will fail validation.", "answer_tailored": true}
{"pair_id": "production-001_p0", "cluster_id": "production-001", "question": "How do I manage secrets in UnifyWeaver?", "question_type": "medium", "answer": "In UnifyWeaver, you manage secrets by using the `declare_secret/3` directive, which allows you to pull sensitive credentials from environment variables or external management services. This abstraction ensures that secrets are handled securely and can be automatically redacted in logs.\n\nCommon configuration examples include:\n\n```prolog\n% Loading from an environment variable\n:- declare_secret(api_service, api_key, [\n    source(env('API_KEY')),\n    redact_in_logs(true)\n]).\n\n% Integrating with HashiCorp Vault\n:- declare_secret(api_service, db_password, [\n    source(vault('secret/data/database', 'password')),\n    vault_addr('https://vault.example.com:8200')\n]).\n\n% Fetching from AWS Secrets Manager\n:- declare_secret(api_service, api_key, [\n    source(aws_secrets('prod/api-key')),\n    region('us-west-2')\n]).\n```\n\nThe system also provides built-in support for Azure Key Vault and GCP Secret Manager. For more information on production hardening and secure credential handling, see the documentation in `education/book-08-security-firewall/`.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Secrets can come from environment variables or external stores:\n\n```prolog\n% Environment variable\n:- declare_secret(api_service, api_key, [\n    source(env('API_KEY')),\n    redact_in_logs(true)\n]).\n\n% HashiCorp Vault\n:- declare_secret(api_service, db_password, [\n    source(vault('secret/data/database', 'password')),\n    vault_addr('https://vault.example.com:8200')\n]).\n\n% AWS Secrets Manager\n:- declare_secret(api_service, api_key, [\n    source(aws_secrets('prod/api-key')),\n    region('us-west-2')\n]).\n```\n\nAlso supports Azure Key Vault and GCP Secret Manager.", "answer_tailored": true}
{"pair_id": "production-002_p0", "cluster_id": "production-002", "question": "How do I configure health checks and monitoring?", "question_type": "medium", "answer": "You can configure health checks and monitoring by using specific declarative directives in your Prolog code to define service status, metrics collection, and logging behavior.\n\n```prolog\n% Define service health checks\n:- declare_health_check(api_service, [\n    endpoint('/health'),\n    interval(30),\n    timeout(5),\n    healthy_threshold(2),\n    unhealthy_threshold(3)\n]).\n\n% Enable Prometheus metrics collection\n:- declare_metrics(api_service, [\n    format(prometheus),\n    endpoint('/metrics'),\n    include([requests_total, request_duration_seconds])\n]).\n\n% Configure structured JSON logging with sensitive data redaction\n:- declare_logging(api_service, [\n    format(json),\n    level(info),\n    redact([password, api_key, token])\n]).\n```\n\nDetailed production hardening and monitoring guides can be found in `education/book-08-security-firewall/`.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Configure health checks, metrics, and logging:\n\n```prolog\n% Health checks\n:- declare_health_check(api_service, [\n    endpoint('/health'),\n    interval(30),\n    timeout(5),\n    healthy_threshold(2),\n    unhealthy_threshold(3)\n]).\n\n% Prometheus metrics\n:- declare_metrics(api_service, [\n    format(prometheus),\n    endpoint('/metrics'),\n    include([requests_total, request_duration_seconds])\n]).\n\n% Structured logging\n:- declare_logging(api_service, [\n    format(json),\n    level(info),\n    redact([password, api_key, token])\n]).\n```", "answer_tailored": true}
{"pair_id": "production-002_p0", "cluster_id": "production-002", "question": "How do I configure alerting in UnifyWeaver?", "question_type": "medium", "answer": "To configure alerting in UnifyWeaver, you use the `declare_alert/3` predicate to define specific monitoring rules, including the trigger conditions, required duration, severity level, and notification channels for your services.\n\n```prolog\n:- declare_alert(api_service, high_error_rate, [\n    condition(error_rate > 0.05),  % Trigger if error rate exceeds 5%\n    duration('5m'),\n    severity(critical),\n    notify([pagerduty, slack])\n]).\n\n:- declare_alert(api_service, high_latency, [\n    condition(p99_latency > 500),  % Trigger if p99 latency exceeds 500ms\n    duration('10m'),\n    severity(warning),\n    notify([slack])\n]).\n\n:- declare_alert(api_service, unhealthy, [\n    condition(health_status == unhealthy),\n    duration('1m'),\n    severity(critical),\n    notify([pagerduty, email])\n]).\n```\n\nFor more details on setting up alerts and production hardening, see `education/book-08-security-firewall/06_production_hardening.md`.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Declare alerts with conditions, duration, severity, and notification channels:\n\n```prolog\n:- declare_alert(api_service, high_error_rate, [\n    condition(error_rate > 0.05),  % >5% errors\n    duration('5m'),\n    severity(critical),\n    notify([pagerduty, slack])\n]).\n\n:- declare_alert(api_service, high_latency, [\n    condition(p99_latency > 500),  % >500ms p99\n    duration('10m'),\n    severity(warning),\n    notify([slack])\n]).\n\n:- declare_alert(api_service, unhealthy, [\n    condition(health_status == unhealthy),\n    duration('1m'),\n    severity(critical),\n    notify([pagerduty, email])\n]).\n```", "answer_tailored": true}
{"pair_id": "production-003_p0", "cluster_id": "production-003", "question": "How do I configure resource limits and rate limiting?", "question_type": "medium", "answer": "You can configure resource limits and rate limiting in UnifyWeaver by using declarative predicates to define service constraints for production environments. This involves specifying hardware allocations with `declare_resource_limits`, managing connection thresholds via `declare_connection_limits`, and implementing traffic throttling through `declare_rate_limit`.\n\n```prolog\n% Resource limits\n:- declare_resource_limits(api_service, [\n    memory_limit('512Mi'),\n    memory_request('256Mi'),\n    cpu_limit('1000m'),        % 1 CPU\n    cpu_request('250m')\n]).\n\n% Connection limits\n:- declare_connection_limits(api_service, [\n    max_connections(1000),\n    connection_timeout(30),\n    idle_timeout(300),\n    max_request_size('10Mi')\n]).\n\n% Rate limiting\n:- declare_rate_limit(api_service, [\n    requests_per_second(100),\n    burst(150),\n    by(client_ip),\n    on_exceed(return_429)\n]).\n```\n\nFor more details on securing services, refer to `education/book-08-security-firewall/06_production_hardening.md`.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Set resource limits and rate limiting for protection:\n\n```prolog\n% Resource limits\n:- declare_resource_limits(api_service, [\n    memory_limit('512Mi'),\n    memory_request('256Mi'),\n    cpu_limit('1000m'),        % 1 CPU\n    cpu_request('250m')\n]).\n\n% Connection limits\n:- declare_connection_limits(api_service, [\n    max_connections(1000),\n    connection_timeout(30),\n    idle_timeout(300),\n    max_request_size('10Mi')\n]).\n\n% Rate limiting\n:- declare_rate_limit(api_service, [\n    requests_per_second(100),\n    burst(150),\n    by(client_ip),\n    on_exceed(return_429)\n]).\n```", "answer_tailored": true}
{"pair_id": "production-003_p0", "cluster_id": "production-003", "question": "What is the production deployment security checklist?", "question_type": "medium", "answer": "The production deployment security checklist for UnifyWeaver involves hardening several key layers to ensure a robust and secure environment:\n\n*   **Transport Layer Security**: Enforce HTTPS across all remote services using TLS 1.2 or higher. Utilize strong cipher suites and implement automated certificate renewal.\n*   **Secrets and Authentication**: Use an external vault for secret storage instead of hardcoding credentials. Configure automated secret rotation and utilize mutual TLS (mTLS) for secure service-to-service communication.\n*   **Network Hardening**: Implement network policies with a \"default deny\" posture, restrict egress traffic to authorized destinations, and configure rate limiting to protect against resource exhaustion.\n*   **Operational Monitoring**: Ensure health checks are active, export system metrics for visibility, and define alerts for critical failure conditions.\n*   **System Resilience**: Define retry policies, circuit breakers, and fallback strategies to handle errors gracefully without compromising security.\n\nDetailed implementation strategies can be found in `education/book-08-security-firewall/06_production_hardening.md`.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Production checklist:\n\n**Transport Security:**\n- HTTPS enabled for all remote services\n- TLS 1.2+ enforced\n- Strong cipher suites\n- Automatic certificate renewal\n\n**Authentication & Secrets:**\n- Secrets in external vault\n- No secrets in code/config\n- Secret rotation configured\n- Service-to-service mTLS\n\n**Network Security:**\n- Network policies with default deny\n- Egress restricted\n- Rate limiting configured\n\n**Monitoring:**\n- Health checks configured\n- Metrics exported\n- Alerts for critical conditions\n\n**Error Handling:**\n- Retry policies\n- Circuit breakers\n- Fallbacks defined", "answer_tailored": true}
