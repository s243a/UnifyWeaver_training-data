{"pair_id": "template-system_p0", "cluster_id": "template-system", "question": "How does UnifyWeaver's template system work?", "question_type": "medium", "answer": "UnifyWeaver utilizes a modular template system to generate Bash code, prioritizing clean separation between logic and output structure over manual string concatenation. This system uses named templates and a flexible resolution hierarchy to determine which code patterns to apply during compilation.\n\n### Core Functionality\nInstead of using complex string formatting, the system relies on the `render_named_template/3` predicate. This allows developers to pass a template name and a list of key-value pairs (variables) to produce the final Bash output.\n\n### Template Discovery and Priority\nTemplates are resolved based on a configurable source order. By default, the system follows this priority:\n1. **File-based templates:** High-priority custom overrides located in `templates/*.tmpl.sh`.\n2. **Cached templates:** Previously loaded templates stored in memory for faster access.\n3. **Generated templates:** Built-in defaults defined as `template/2` facts within the Prolog source.\n\nThe search order can be modified via `set_template_config_default([source_order([...])])` to allow for easy project-specific overrides.\n\n### Syntax and Customization\nTemplates employ a simple `{{variable}}` syntax for data injection. For instance, defining a Bash function template would look like this:\n```bash\n{{function_name}}() {\n    {{body}}\n}\n```\nUsers can customize the compiler's output by creating their own `.tmpl.sh` files, which the system automatically picks up if the source order is configured to prefer files.\n\n### Caching Mechanism\nTo improve performance, UnifyWeaver supports an automatic caching system. When `auto_cache(true)` is enabled, templates are stored in a `templates/cache/` directory. This allows for inspection of the final rendered templates and reduces the overhead of repeatedly processing files from disk.\n\nFor detailed implementation examples and configuration options, refer to `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "code-generation", "customization", "named-templates"], "original_answer": "## The Template System\n\nUnifyWeaver uses named templates to generate Bash code cleanly.\n\n### Why Templates?\n\n**Bad (concatenation):**\n```prolog\nformat(string(Code), '#!/bin/bash\\n~w() {\\n~w\\n}\\n', [Name, Body]).\n```\n\n**Good (templates):**\n```prolog\nrender_named_template(bash_header, [name=Name, body=Body], Code).\n```\n\n### Template Source Order\n\nTemplates are loaded from multiple sources:\n\n```prolog\n?- set_template_config_default([source_order([file, cached, generated])]).\n```\n\n| Priority | Source | Location |\n|----------|--------|----------|\n| 1 | file | `templates/name.tmpl.sh` |\n| 2 | cached | In-memory cache |\n| 3 | generated | Built-in `template/2` facts |\n\n### Customizing Templates\n\n**Step 1:** Configure to prefer files\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\n**Step 2:** Create custom template file\n```bash\n# templates/bash_header.tmpl.sh\n#!/bin/bash\n# Custom header for My Project\n# Description: {{description}}\n```\n\n**Step 3:** Templates auto-load\n```prolog\n?- render_named_template(bash_header, [description='My Script'], Code).\n```\n\n### Template Variables\n\nUse `{{variable}}` syntax:\n\n```bash\n{{pred}}() {\n    local key=\"$1:$2\"\n    [[ -n \"${{{pred}}_data[$key]}\" ]] && echo \"$key\"\n}\n```\n\n### Enabling Caching\n\n```prolog\n?- set_template_config_default([\n    source_order([file, cached, generated]),\n    auto_cache(true)\n]).\n```\n\nCached templates are saved to `templates/cache/` for inspection.", "answer_tailored": true}
{"pair_id": "template-system_p1", "cluster_id": "template-system", "question": "What are named templates in UnifyWeaver?", "question_type": "medium", "answer": "Named templates in UnifyWeaver are a structured system for generating target code (such as Bash) by substituting variables into pre-defined blueprints. This approach avoids the maintenance overhead of manual string concatenation by using a dedicated rendering engine.\n\n### Core Implementation\nInstead of building code strings directly, you utilize the `render_named_template/3` predicate to combine a template name with specific variable bindings:\n\n```prolog\n% Example of rendering a named template\nrender_named_template(bash_header, [name=Name, body=Body], Code).\n```\n\n### Template Syntax and Variables\nTemplates define placeholders using the `{{variable}}` syntax. During generation, these placeholders are replaced with values provided in the rendering call:\n\n```bash\n{{pred}}() {\n    local key=\"$1:$2\"\n    [[ -n \"${{{pred}}_data[$key]}\" ]] && echo \"$key\"\n}\n```\n\n### Resolution and Source Order\nUnifyWeaver resolves templates based on a priority system configured via `set_template_config_default/1`. The engine searches for templates in this order:\n1.  **file**: External files located at `templates/name.tmpl.sh`.\n2.  **cached**: In-memory or disk-based cache (stored in `templates/cache/`).\n3.  **generated**: Built-in defaults defined as `template/2` facts within the Prolog environment.\n\n### Customization and Caching\nDevelopers can override default behaviors by adjusting the source order or enabling automatic caching for inspection and performance:\n\n```prolog\n?- set_template_config_default([\n    source_order([file, cached, generated]),\n    auto_cache(true)\n]).\n```\n\nDetailed technical specifications and examples of the template system can be found in `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "code-generation", "customization", "named-templates"], "original_answer": "## The Template System\n\nUnifyWeaver uses named templates to generate Bash code cleanly.\n\n### Why Templates?\n\n**Bad (concatenation):**\n```prolog\nformat(string(Code), '#!/bin/bash\\n~w() {\\n~w\\n}\\n', [Name, Body]).\n```\n\n**Good (templates):**\n```prolog\nrender_named_template(bash_header, [name=Name, body=Body], Code).\n```\n\n### Template Source Order\n\nTemplates are loaded from multiple sources:\n\n```prolog\n?- set_template_config_default([source_order([file, cached, generated])]).\n```\n\n| Priority | Source | Location |\n|----------|--------|----------|\n| 1 | file | `templates/name.tmpl.sh` |\n| 2 | cached | In-memory cache |\n| 3 | generated | Built-in `template/2` facts |\n\n### Customizing Templates\n\n**Step 1:** Configure to prefer files\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\n**Step 2:** Create custom template file\n```bash\n# templates/bash_header.tmpl.sh\n#!/bin/bash\n# Custom header for My Project\n# Description: {{description}}\n```\n\n**Step 3:** Templates auto-load\n```prolog\n?- render_named_template(bash_header, [description='My Script'], Code).\n```\n\n### Template Variables\n\nUse `{{variable}}` syntax:\n\n```bash\n{{pred}}() {\n    local key=\"$1:$2\"\n    [[ -n \"${{{pred}}_data[$key]}\" ]] && echo \"$key\"\n}\n```\n\n### Enabling Caching\n\n```prolog\n?- set_template_config_default([\n    source_order([file, cached, generated]),\n    auto_cache(true)\n]).\n```\n\nCached templates are saved to `templates/cache/` for inspection.", "answer_tailored": true}
{"pair_id": "template-system_p2", "cluster_id": "template-system", "question": "How do I customize generated code with templates?", "question_type": "medium", "answer": "You can customize the code UnifyWeaver generates by overriding the default named templates with your own external template files. This approach allows you to modify the output structure without changing the core Prolog compiler logic.\n\n### Configuration for Custom Templates\nBy default, UnifyWeaver uses built-in template facts. To use custom files, you must configure the template source order to prioritize the file system:\n\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\n### Steps to Customize\n1.  **Create a Template File:** Place your custom Bash template in the `templates/` directory (e.g., `templates/bash_header.tmpl.sh`).\n2.  **Use Variable Syntax:** Use the `{{variable}}` syntax within your template to mark where generated values should be inserted:\n    ```bash\n    #!/bin/bash\n    # Custom Header: {{project_name}}\n    {{body}}\n    ```\n3.  **Render the Template:** Call the `render_named_template/3` predicate in your Prolog code:\n    ```prolog\n    ?- render_named_template(bash_header, [project_name='MyApp', body=Body], Code).\n    ```\n\n### Template Resolution Order\nThe system checks sources in the following priority:\n1.  **file**: Searches for `templates/name.tmpl.sh`.\n2.  **cached**: Uses the in-memory or disk cache (if `auto_cache(true)` is enabled).\n3.  **generated**: Falls back to built-in `template/2` facts defined in the source.\n\nFor performance, you can enable caching, which saves resolved templates to `templates/cache/` for inspection:\n```prolog\n?- set_template_config_default([\n    source_order([file, cached, generated]),\n    auto_cache(true)\n]).\n```\n\nDetailed documentation on the Bash template system and variable substitution can be found in `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "code-generation", "customization", "named-templates"], "original_answer": "## The Template System\n\nUnifyWeaver uses named templates to generate Bash code cleanly.\n\n### Why Templates?\n\n**Bad (concatenation):**\n```prolog\nformat(string(Code), '#!/bin/bash\\n~w() {\\n~w\\n}\\n', [Name, Body]).\n```\n\n**Good (templates):**\n```prolog\nrender_named_template(bash_header, [name=Name, body=Body], Code).\n```\n\n### Template Source Order\n\nTemplates are loaded from multiple sources:\n\n```prolog\n?- set_template_config_default([source_order([file, cached, generated])]).\n```\n\n| Priority | Source | Location |\n|----------|--------|----------|\n| 1 | file | `templates/name.tmpl.sh` |\n| 2 | cached | In-memory cache |\n| 3 | generated | Built-in `template/2` facts |\n\n### Customizing Templates\n\n**Step 1:** Configure to prefer files\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\n**Step 2:** Create custom template file\n```bash\n# templates/bash_header.tmpl.sh\n#!/bin/bash\n# Custom header for My Project\n# Description: {{description}}\n```\n\n**Step 3:** Templates auto-load\n```prolog\n?- render_named_template(bash_header, [description='My Script'], Code).\n```\n\n### Template Variables\n\nUse `{{variable}}` syntax:\n\n```bash\n{{pred}}() {\n    local key=\"$1:$2\"\n    [[ -n \"${{{pred}}_data[$key]}\" ]] && echo \"$key\"\n}\n```\n\n### Enabling Caching\n\n```prolog\n?- set_template_config_default([\n    source_order([file, cached, generated]),\n    auto_cache(true)\n]).\n```\n\nCached templates are saved to `templates/cache/` for inspection.", "answer_tailored": true}
{"pair_id": "template-system_p3", "cluster_id": "template-system", "question": "What is the template source order?", "question_type": "medium", "answer": "In UnifyWeaver, the template source order defines the priority sequence the system uses to locate and load named templates for code generation. By default, the resolution hierarchy follows this order:\n\n1.  **file**: The system first looks for an external file at `templates/name.tmpl.sh`.\n2.  **cached**: It then checks the in-memory cache for a pre-loaded version.\n3.  **generated**: Finally, it falls back to built-in templates defined within Prolog `template/2` facts.\n\nThis order is managed using the `set_template_config_default/1` predicate. For example, to establish the standard priority, you would use:\n\n```prolog\n?- set_template_config_default([source_order([file, cached, generated])]).\n```\n\nBy modifying this list, developers can prioritize custom template files over built-in logic. When caching is enabled (using `auto_cache(true)`), templates are also saved to `templates/cache/` for debugging and inspection.\n\nFor more details on customizing the template engine, see the documentation in `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "code-generation", "customization", "named-templates"], "original_answer": "## The Template System\n\nUnifyWeaver uses named templates to generate Bash code cleanly.\n\n### Why Templates?\n\n**Bad (concatenation):**\n```prolog\nformat(string(Code), '#!/bin/bash\\n~w() {\\n~w\\n}\\n', [Name, Body]).\n```\n\n**Good (templates):**\n```prolog\nrender_named_template(bash_header, [name=Name, body=Body], Code).\n```\n\n### Template Source Order\n\nTemplates are loaded from multiple sources:\n\n```prolog\n?- set_template_config_default([source_order([file, cached, generated])]).\n```\n\n| Priority | Source | Location |\n|----------|--------|----------|\n| 1 | file | `templates/name.tmpl.sh` |\n| 2 | cached | In-memory cache |\n| 3 | generated | Built-in `template/2` facts |\n\n### Customizing Templates\n\n**Step 1:** Configure to prefer files\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\n**Step 2:** Create custom template file\n```bash\n# templates/bash_header.tmpl.sh\n#!/bin/bash\n# Custom header for My Project\n# Description: {{description}}\n```\n\n**Step 3:** Templates auto-load\n```prolog\n?- render_named_template(bash_header, [description='My Script'], Code).\n```\n\n### Template Variables\n\nUse `{{variable}}` syntax:\n\n```bash\n{{pred}}() {\n    local key=\"$1:$2\"\n    [[ -n \"${{{pred}}_data[$key]}\" ]] && echo \"$key\"\n}\n```\n\n### Enabling Caching\n\n```prolog\n?- set_template_config_default([\n    source_order([file, cached, generated]),\n    auto_cache(true)\n]).\n```\n\nCached templates are saved to `templates/cache/` for inspection.", "answer_tailored": true}
{"pair_id": "template-customization_p0", "cluster_id": "template-customization", "question": "How do I override built-in templates?", "question_type": "medium", "answer": "You override built-in Bash templates by creating custom template files in your project's `templates/` directory and configuring the compiler to prioritize them over the defaults. This allows you to customize the generated code's style and logic without modifying the UnifyWeaver compiler itself.\n\n### Key Overridable Templates\n| Template Name | Purpose |\n|---------------|---------|\n| `bash_header` | Script shebang and custom header comments |\n| `facts/lookup_binary` | Logic for binary fact lookup functions |\n| `facts/stream` | Logic for fact streaming functions |\n| `recursion/bfs_loop` | BFS traversal loop implementation |\n| `recursion/visited_check` | Visited-node tracking logic |\n\n### Implementation Example\n\n1. **Create the Override File**: To customize the script header, create `templates/bash_header.tmpl.sh`:\n```bash\n#!/bin/bash\n# Custom UnifyWeaver Header\n# Project: {{project_name}}\n# Predicate: {{pred}}\n```\n\n2. **Update Compiler Configuration**: Use the `set_template_config_default/1` predicate in Prolog to set the source order so the compiler looks for files before using generated defaults:\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\n3. **Generate Code**: When you run `compile_predicate/3`, the output will now include your custom header.\n\n### Customizing Function Logic\nYou can also override internal logic, such as `templates/facts/lookup_binary.tmpl.sh`, to change how facts are queried:\n```bash\n# {{pred}} - Custom lookup style\n{{pred}}() {\n    local key=\"${1}:${2}\"\n    if [[ -v \"{{pred}}_data[$key]\" ]]; then\n        echo \"$key\"\n        return 0\n    fi\n    return 1\n}\n```\n\nThis method is ideal for project-specific styling and maintaining template changes under version control. For more comprehensive details on the template system, see `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "override", "theming", "customization"], "original_answer": "## Overriding Built-in Templates\n\nCustomize generated code without modifying the compiler.\n\n### Available Templates\n\n| Template Name | Purpose |\n|---------------|--------|\n| `bash_header` | Script shebang and header comments |\n| `facts/lookup_binary` | Binary fact lookup function |\n| `facts/stream` | Fact streaming function |\n| `recursion/bfs_loop` | BFS traversal loop |\n| `recursion/visited_check` | Visited tracking logic |\n\n### Override Example: Custom Header\n\n**Create `templates/bash_header.tmpl.sh`:**\n```bash\n#!/bin/bash\n# ========================================\n# Generated by UnifyWeaver\n# Project: {{project_name}}\n# Date: $(date)\n# ========================================\n# Predicate: {{pred}}\n# Description: {{description}}\n```\n\n**Use it:**\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n?- compile_predicate(ancestor/2, [], Code).\n% Code now includes your custom header\n```\n\n### Override Example: Custom Function Style\n\n**Create `templates/facts/lookup_binary.tmpl.sh`:**\n```bash\n# {{pred}} - Lookup function (custom style)\n{{pred}}() {\n    local arg1=\"$1\" arg2=\"$2\"\n    local key=\"${arg1}:${arg2}\"\n    \n    if [[ -v \"{{pred}}_data[$key]\" ]]; then\n        echo \"$key\"\n        return 0\n    fi\n    return 1\n}\n```\n\n### Benefits\n\n- No compiler modifications needed\n- Project-specific styling\n- Easy to version control templates\n- Can be shared across team", "answer_tailored": true}
{"pair_id": "template-customization_p1", "cluster_id": "template-customization", "question": "Can I add custom headers to generated scripts?", "question_type": "medium", "answer": "Yes, you can add custom headers to your generated Bash scripts by overriding the built-in `bash_header` template. This mechanism allows for project-specific styling and metadata inclusion without requiring modifications to the core compiler.\n\nTo implement a custom header:\n1. Create a file named `templates/bash_header.tmpl.sh`.\n2. Define your header content using supported placeholders like `{{project_name}}`, `{{pred}}`, and `{{description}}`. For example:\n```bash\n#!/bin/bash\n# ========================================\n# Generated by UnifyWeaver\n# Project: {{project_name}}\n# Predicate: {{pred}}\n# ========================================\n```\n3. Configure the compiler to prioritize your local template files by setting the source order in Prolog:\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\nAfter this configuration, any predicate you compile will utilize your custom header. This template system can also be used to override other script components such as `facts/lookup_binary` or `recursion/bfs_loop`. For a full list of available templates and detailed override instructions, see `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "override", "theming", "customization"], "original_answer": "## Overriding Built-in Templates\n\nCustomize generated code without modifying the compiler.\n\n### Available Templates\n\n| Template Name | Purpose |\n|---------------|--------|\n| `bash_header` | Script shebang and header comments |\n| `facts/lookup_binary` | Binary fact lookup function |\n| `facts/stream` | Fact streaming function |\n| `recursion/bfs_loop` | BFS traversal loop |\n| `recursion/visited_check` | Visited tracking logic |\n\n### Override Example: Custom Header\n\n**Create `templates/bash_header.tmpl.sh`:**\n```bash\n#!/bin/bash\n# ========================================\n# Generated by UnifyWeaver\n# Project: {{project_name}}\n# Date: $(date)\n# ========================================\n# Predicate: {{pred}}\n# Description: {{description}}\n```\n\n**Use it:**\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n?- compile_predicate(ancestor/2, [], Code).\n% Code now includes your custom header\n```\n\n### Override Example: Custom Function Style\n\n**Create `templates/facts/lookup_binary.tmpl.sh`:**\n```bash\n# {{pred}} - Lookup function (custom style)\n{{pred}}() {\n    local arg1=\"$1\" arg2=\"$2\"\n    local key=\"${arg1}:${arg2}\"\n    \n    if [[ -v \"{{pred}}_data[$key]\" ]]; then\n        echo \"$key\"\n        return 0\n    fi\n    return 1\n}\n```\n\n### Benefits\n\n- No compiler modifications needed\n- Project-specific styling\n- Easy to version control templates\n- Can be shared across team", "answer_tailored": true}
{"pair_id": "template-customization_p2", "cluster_id": "template-customization", "question": "How do I theme UnifyWeaver output?", "question_type": "medium", "answer": "You can theme or customize the visual style of UnifyWeaver's generated code by utilizing the built-in template override system. This allows you to modify the structure and metadata of the output (such as headers or function styles) without needing to change the compiler source itself.\n\n### Theming via Template Overrides\n\nTo apply a custom theme, you create override files in your project's `templates/` directory that correspond to specific compiler hooks:\n\n*   `bash_header`: Customizes the shebang and script headers.\n*   `facts/lookup_binary`: Modifies how binary fact lookup functions are structured.\n*   `recursion/bfs_loop`: Themes the logic for breadth-first search traversals.\n\n### Implementation Example: Custom Script Header\n\nCreate a file named `templates/bash_header.tmpl.sh` to define your theme:\n\n```bash\n#!/bin/bash\n# ----------------------------------------\n# Theme: Corporate Standard\n# Generated: $(date)\n# Predicate: {{pred}}\n# ----------------------------------------\n```\n\n### Applying the Theme\n\nOnce your templates are defined, instruct the compiler to prioritize your local files by setting the configuration in your Prolog environment:\n\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n?- compile_predicate(your_predicate/N, [], Code).\n```\n\nThis configuration ensures the compiler checks your `templates/` folder before falling back to default styles. For a full list of overridable templates and advanced configuration options, refer to the documentation in `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "override", "theming", "customization"], "original_answer": "## Overriding Built-in Templates\n\nCustomize generated code without modifying the compiler.\n\n### Available Templates\n\n| Template Name | Purpose |\n|---------------|--------|\n| `bash_header` | Script shebang and header comments |\n| `facts/lookup_binary` | Binary fact lookup function |\n| `facts/stream` | Fact streaming function |\n| `recursion/bfs_loop` | BFS traversal loop |\n| `recursion/visited_check` | Visited tracking logic |\n\n### Override Example: Custom Header\n\n**Create `templates/bash_header.tmpl.sh`:**\n```bash\n#!/bin/bash\n# ========================================\n# Generated by UnifyWeaver\n# Project: {{project_name}}\n# Date: $(date)\n# ========================================\n# Predicate: {{pred}}\n# Description: {{description}}\n```\n\n**Use it:**\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n?- compile_predicate(ancestor/2, [], Code).\n% Code now includes your custom header\n```\n\n### Override Example: Custom Function Style\n\n**Create `templates/facts/lookup_binary.tmpl.sh`:**\n```bash\n# {{pred}} - Lookup function (custom style)\n{{pred}}() {\n    local arg1=\"$1\" arg2=\"$2\"\n    local key=\"${arg1}:${arg2}\"\n    \n    if [[ -v \"{{pred}}_data[$key]\" ]]; then\n        echo \"$key\"\n        return 0\n    fi\n    return 1\n}\n```\n\n### Benefits\n\n- No compiler modifications needed\n- Project-specific styling\n- Easy to version control templates\n- Can be shared across team", "answer_tailored": true}
{"pair_id": "template-customization_p3", "cluster_id": "template-customization", "question": "What templates can I customize?", "question_type": "medium", "answer": "You can customize several categories of built-in templates in UnifyWeaver to tailor the generated Bash code to your project's needs. The primary templates available for override include:\n\n*   **`bash_header`**: Controls the script shebang, boilerplate comments, and metadata at the top of the file.\n*   **`facts/lookup_binary`**: Defines the logic for binary fact lookup functions.\n*   **`facts/stream`**: Customizes how fact streaming functions are structured.\n*   **`recursion/bfs_loop`**: Allows modification of the core Breadth-First Search traversal logic.\n*   **`recursion/visited_check`**: Customizes the mechanism used for tracking visited nodes during recursion.\n\nTo perform an override, create a corresponding template file in your project directory (e.g., `templates/bash_header.tmpl.sh`). You can use placeholders like `{{project_name}}` and `{{pred}}` within these files. For example, a custom header might be defined as:\n\n```bash\n#!/bin/bash\n# Project: {{project_name}}\n# Generated Predicate: {{pred}}\n```\n\nTo tell the compiler to prioritize your local templates, use the following Prolog configuration:\n\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n```\n\nThis configuration ensures the compiler checks for your custom files before falling back to built-in defaults. For more details on the template inheritance system, see `education/book-02-bash-target/05_template_system.md`.", "answer_variant": "default", "answer_source": "education/book-02-bash-target/05_template_system.md", "topics": ["templates", "override", "theming", "customization"], "original_answer": "## Overriding Built-in Templates\n\nCustomize generated code without modifying the compiler.\n\n### Available Templates\n\n| Template Name | Purpose |\n|---------------|--------|\n| `bash_header` | Script shebang and header comments |\n| `facts/lookup_binary` | Binary fact lookup function |\n| `facts/stream` | Fact streaming function |\n| `recursion/bfs_loop` | BFS traversal loop |\n| `recursion/visited_check` | Visited tracking logic |\n\n### Override Example: Custom Header\n\n**Create `templates/bash_header.tmpl.sh`:**\n```bash\n#!/bin/bash\n# ========================================\n# Generated by UnifyWeaver\n# Project: {{project_name}}\n# Date: $(date)\n# ========================================\n# Predicate: {{pred}}\n# Description: {{description}}\n```\n\n**Use it:**\n```prolog\n?- set_template_config_default([source_order([file, generated])]).\n?- compile_predicate(ancestor/2, [], Code).\n% Code now includes your custom header\n```\n\n### Override Example: Custom Function Style\n\n**Create `templates/facts/lookup_binary.tmpl.sh`:**\n```bash\n# {{pred}} - Lookup function (custom style)\n{{pred}}() {\n    local arg1=\"$1\" arg2=\"$2\"\n    local key=\"${arg1}:${arg2}\"\n    \n    if [[ -v \"{{pred}}_data[$key]\" ]]; then\n        echo \"$key\"\n        return 0\n    fi\n    return 1\n}\n```\n\n### Benefits\n\n- No compiler modifications needed\n- Project-specific styling\n- Easy to version control templates\n- Can be shared across team", "answer_tailored": true}
