{"cluster_id": "ps-facts-001", "question": "How are Prolog facts compiled to PowerShell?", "answer": "Facts become PowerShell arrays with PSCustomObject entries:\n\n**Unary facts:**\n```prolog\ncolor(red). color(green). color(blue).\n```\n→\n```powershell\n$facts = @('red', 'green', 'blue')\n```\n\n**Binary facts:**\n```prolog\nparent(anne, bob). parent(bob, charles).\n```\n→\n```powershell\n$facts = @(\n    [PSCustomObject]@{ X='anne'; Y='bob' },\n    [PSCustomObject]@{ X='bob'; Y='charles' }\n)\n```\n\nPSCustomObject provides:\n- Named property access (`.X`, `.Y`)\n- Pipeline-friendly (`Where-Object`, `Select-Object`)\n- JSON serialization (`ConvertTo-Json`)", "source_file": "book-12-powershell-target/02_facts_rules.md", "prerequisites": ["ps-001"]}
{"cluster_id": "ps-facts-001", "question": "How are Prolog rules compiled to PowerShell functions?", "answer": "Rules become functions with nested loop joins:\n\n**Prolog:**\n```prolog\ngrandparent(X, Z) :- parent(X, Y), parent(Y, Z).\n```\n\n**Generated PowerShell:**\n```powershell\nfunction grandparent {\n    param([string]$X, [string]$Z)\n    \n    $rel1 = parent\n    $rel2 = parent\n    \n    $results = foreach ($r1 in $rel1) {\n        foreach ($r2 in $rel2) {\n            if ($r1.Y -eq $r2.X) {  # Join condition\n                [PSCustomObject]@{ X = $r1.X; Z = $r2.Y }\n            }\n        }\n    }\n    # ... filtering logic\n}\n```\n\nNegation (`\\+`) uses hashtable-based exclusion for O(1) lookups.", "source_file": "book-12-powershell-target/02_facts_rules.md", "prerequisites": ["ps-facts-001"]}
{"cluster_id": "ps-facts-002", "question": "How do I use compile_facts_to_powershell/3?", "answer": "For class-based fact export with static methods:\n\n```prolog\n?- powershell_target:compile_facts_to_powershell(parent, 2, Code).\n```\n\n**Generated:**\n```powershell\nclass PARENT {\n    static [string[][]] $FACTS = @(\n        @(\"anne\", \"bob\"),\n        @(\"bob\", \"charles\")\n    )\n    \n    static [string[][]] GetAll() {\n        return [PARENT]::FACTS\n    }\n    \n    static [bool] Contains([string[]]$target) {\n        # ... membership check\n    }\n}\n```\n\n**Benefits:**\n- Self-contained PowerShell class\n- `GetAll()`, `Stream()`, `Contains()` methods\n- Works with PowerShell 5.1+ class syntax", "source_file": "book-12-powershell-target/02_facts_rules.md", "prerequisites": ["ps-facts-001"]}
