{"pair_id": "b7-c9-native-code-gen_p0", "cluster_id": "b7-c9-native-code-gen", "question": "How do I generate Go pipe wrappers?", "question_type": "medium", "answer": "To generate Go pipe wrappers in UnifyWeaver, use:\n\n```prolog\ngenerate_go_pipe_main(Logic, Options, Code).\n```\n\nThis creates a Go program that reads from stdin, parses TSV or JSON input, processes each record according to your logic, and writes results to stdout.\n\n**Parallel Processing:**\n\nFor concurrent record processing, specify worker count:\n\n```prolog\ngenerate_go_pipe_main(Logic, [parallel(8)], Code).\n```\n\nThis generates goroutines to handle records in parallel.\n\n**Cross-Platform Builds:**\n\nTo compile for multiple platforms:\n\n```prolog\ngenerate_cross_compile(go, Source, [\n    linux-amd64, darwin-arm64, windows-amd64\n], Script).\n```\n\nFor Rust pipe wrappers, use `generate_rust_pipe_main/3` with the same pattern. See education/book-07-cross-target-glue/09_native_code_gen.md for implementation details.", "answer_variant": "default", "answer_source": "education/book-07-cross-target-glue/09_native_code_gen.md", "topics": ["go-wrapper", "rust-wrapper", "native-code"], "original_answer": "## Native Code Generation\n\n### Go Pipe Wrapper\n\n```prolog\ngenerate_go_pipe_main(Logic, Options, Code).\n```\n\nGenerates Go code that:\n- Reads from stdin\n- Parses TSV/JSON\n- Processes records\n- Writes to stdout\n\n### Rust Pipe Wrapper\n\n```prolog\ngenerate_rust_pipe_main(Logic, Options, Code).\n```\n\n### Parallel Processing\n\n```prolog\n% Generate Go with 8 parallel workers\ngenerate_go_pipe_main(Logic, [parallel(8)], Code).\n```\n\nGenerates goroutines that process records concurrently.\n\n### Build Script Generation\n\n```prolog\n% Cross-compile for multiple platforms\ngenerate_cross_compile(go, Source, [\n    linux-amd64, darwin-arm64, windows-amd64\n], Script).\n```", "answer_tailored": true}
{"pair_id": "b7-c9-native-code-gen_p1", "cluster_id": "b7-c9-native-code-gen", "question": "How do I generate Rust pipe wrappers?", "question_type": "medium", "answer": "To generate Rust pipe wrappers in UnifyWeaver, use:\n\n```prolog\ngenerate_rust_pipe_main(Logic, Options, Code).\n```\n\nThis creates Rust code that reads from stdin, parses input data (TSV/JSON format), processes records according to your logic, and writes results to stdout.\n\nFor parallel processing with multiple threads:\n\n```prolog\n% Generate Rust with 8 parallel workers\ngenerate_rust_pipe_main(Logic, [parallel(8)], Code).\n```\n\nYou can also generate cross-compilation build scripts:\n\n```prolog\n% Cross-compile for multiple platforms\ngenerate_cross_compile(rust, Source, [\n    linux-amd64, darwin-arm64, windows-amd64\n], Script).\n```\n\nSee education/book-07-cross-target-glue/09_native_code_gen.md for complete documentation on native code generation across all targets.", "answer_variant": "default", "answer_source": "education/book-07-cross-target-glue/09_native_code_gen.md", "topics": ["go-wrapper", "rust-wrapper", "native-code"], "original_answer": "## Native Code Generation\n\n### Go Pipe Wrapper\n\n```prolog\ngenerate_go_pipe_main(Logic, Options, Code).\n```\n\nGenerates Go code that:\n- Reads from stdin\n- Parses TSV/JSON\n- Processes records\n- Writes to stdout\n\n### Rust Pipe Wrapper\n\n```prolog\ngenerate_rust_pipe_main(Logic, Options, Code).\n```\n\n### Parallel Processing\n\n```prolog\n% Generate Go with 8 parallel workers\ngenerate_go_pipe_main(Logic, [parallel(8)], Code).\n```\n\nGenerates goroutines that process records concurrently.\n\n### Build Script Generation\n\n```prolog\n% Cross-compile for multiple platforms\ngenerate_cross_compile(go, Source, [\n    linux-amd64, darwin-arm64, windows-amd64\n], Script).\n```", "answer_tailored": true}
{"pair_id": "b7-c9-native-code-gen_p2", "cluster_id": "b7-c9-native-code-gen", "question": "What is generate_go_pipe_main?", "question_type": "medium", "answer": "`generate_go_pipe_main/3` is a Prolog predicate that generates a complete Go program for stream processing. It takes three arguments: the processing logic, options (like parallelization settings), and the resulting Go code.\n\nThe generated Go program:\n- Reads input from stdin\n- Parses data in TSV or JSON format\n- Applies the specified processing logic to each record\n- Writes results to stdout\n\nYou can configure parallel processing using the `parallel/1` option. For example, `generate_go_pipe_main(Logic, [parallel(8)], Code)` generates Go code with 8 concurrent goroutines for processing records in parallel.\n\nThere's also an analogous `generate_rust_pipe_main/3` for Rust target generation, and `generate_cross_compile/4` for creating build scripts that compile for multiple platforms (linux-amd64, darwin-arm64, windows-amd64, etc.).\n\nSee education/book-07-cross-target-glue/09_native_code_gen.md for implementation details.", "answer_variant": "default", "answer_source": "education/book-07-cross-target-glue/09_native_code_gen.md", "topics": ["go-wrapper", "rust-wrapper", "native-code"], "original_answer": "## Native Code Generation\n\n### Go Pipe Wrapper\n\n```prolog\ngenerate_go_pipe_main(Logic, Options, Code).\n```\n\nGenerates Go code that:\n- Reads from stdin\n- Parses TSV/JSON\n- Processes records\n- Writes to stdout\n\n### Rust Pipe Wrapper\n\n```prolog\ngenerate_rust_pipe_main(Logic, Options, Code).\n```\n\n### Parallel Processing\n\n```prolog\n% Generate Go with 8 parallel workers\ngenerate_go_pipe_main(Logic, [parallel(8)], Code).\n```\n\nGenerates goroutines that process records concurrently.\n\n### Build Script Generation\n\n```prolog\n% Cross-compile for multiple platforms\ngenerate_cross_compile(go, Source, [\n    linux-amd64, darwin-arm64, windows-amd64\n], Script).\n```", "answer_tailored": true}
{"pair_id": "b7-c10-native-orchestration_p0", "cluster_id": "b7-c10-native-orchestration", "question": "How do I manage native binaries?", "question_type": "medium", "answer": "To manage native binaries in UnifyWeaver, the system provides automated compilation and caching capabilities. When you reference a native tool, the orchestrator detects whether the binary exists, compiles it on demand if needed, and caches the result for future use. Version detection ensures you're running the correct binary.\n\nFor cross-platform scenarios, you can build for multiple targets from a single source:\n\n```bash\n# Build for 5 platforms from one source\nGOOS=linux GOARCH=amd64 go build -o tool-linux-amd64\nGOOS=darwin GOARCH=arm64 go build -o tool-darwin-arm64\nGOOS=windows GOARCH=amd64 go build -o tool-windows.exe\n```\n\nYou can also integrate native binaries into mixed-language pipelines:\n\n```prolog\n% Shell + native in same pipeline\ngenerate_pipeline([\n    step(parse, awk, 'parse.awk', []),\n    step(process, go, 'process', [parallel(4)]),\n    step(format, awk, 'format.awk', [])\n], Options, Script).\n```\n\nThe system automatically handles binary detection, compilation when necessary, and pipe connections between steps. For more details on orchestration patterns, see education/book-07-cross-target-glue/10_native_orchestration.md.", "answer_variant": "default", "answer_source": "education/book-07-cross-target-glue/10_native_orchestration.md", "topics": ["binary-management", "cross-compilation", "orchestration"], "original_answer": "## Native Binary Orchestration\n\n### Binary Management\n\n- Compilation on demand\n- Caching of compiled binaries\n- Version detection\n\n### Cross-Compilation\n\n```bash\n# Build for 5 platforms from one source\nGOOS=linux GOARCH=amd64 go build -o tool-linux-amd64\nGOOS=darwin GOARCH=arm64 go build -o tool-darwin-arm64\nGOOS=windows GOARCH=amd64 go build -o tool-windows.exe\n```\n\n### Mixed Pipelines\n\n```prolog\n% Shell + native in same pipeline\ngenerate_pipeline([\n    step(parse, awk, 'parse.awk', []),\n    step(process, go, 'process', [parallel(4)]),\n    step(format, awk, 'format.awk', [])\n], Options, Script).\n```\n\nThe orchestrator handles:\n- Binary detection\n- Compilation if needed\n- Pipe connections", "answer_tailored": true}
{"pair_id": "b7-c10-native-orchestration_p1", "cluster_id": "b7-c10-native-orchestration", "question": "How does cross-compilation work?", "question_type": "medium", "answer": "Cross-compilation in UnifyWeaver allows you to build native binaries for multiple platforms from a single source. For example, you can compile Go code for different operating systems and architectures using environment variables:\n\n```bash\n# Build for 5 platforms from one source\nGOOS=linux GOARCH=amd64 go build -o tool-linux-amd64\nGOOS=darwin GOARCH=arm64 go build -o tool-darwin-arm64\nGOOS=windows GOARCH=amd64 go build -o tool-windows.exe\n```\n\nThe system manages binaries through on-demand compilation, caching of compiled artifacts, and automatic version detection. This enables mixed pipelines where shell scripts and native binaries work together seamlessly:\n\n```prolog\n% Shell + native in same pipeline\ngenerate_pipeline([\n    step(parse, awk, 'parse.awk', []),\n    step(process, go, 'process', [parallel(4)]),\n    step(format, awk, 'format.awk', [])\n], Options, Script).\n```\n\nThe orchestrator automatically detects binaries, compiles them when necessary, and handles pipe connections between different components. For more details on native orchestration, see education/book-07-cross-target-glue/10_native_orchestration.md.", "answer_variant": "default", "answer_source": "education/book-07-cross-target-glue/10_native_orchestration.md", "topics": ["binary-management", "cross-compilation", "orchestration"], "original_answer": "## Native Binary Orchestration\n\n### Binary Management\n\n- Compilation on demand\n- Caching of compiled binaries\n- Version detection\n\n### Cross-Compilation\n\n```bash\n# Build for 5 platforms from one source\nGOOS=linux GOARCH=amd64 go build -o tool-linux-amd64\nGOOS=darwin GOARCH=arm64 go build -o tool-darwin-arm64\nGOOS=windows GOARCH=amd64 go build -o tool-windows.exe\n```\n\n### Mixed Pipelines\n\n```prolog\n% Shell + native in same pipeline\ngenerate_pipeline([\n    step(parse, awk, 'parse.awk', []),\n    step(process, go, 'process', [parallel(4)]),\n    step(format, awk, 'format.awk', [])\n], Options, Script).\n```\n\nThe orchestrator handles:\n- Binary detection\n- Compilation if needed\n- Pipe connections", "answer_tailored": true}
{"pair_id": "b7-c10-native-orchestration_p2", "cluster_id": "b7-c10-native-orchestration", "question": "Can I mix shell and native stages?", "question_type": "medium", "answer": "Yes, you can mix shell and native stages in the same pipeline. UnifyWeaver's orchestrator handles this seamlessly through its pipeline generation system.\n\nHere's an example combining AWK (shell) with Go (native):\n\n```prolog\n% Hybrid pipeline with shell and compiled stages\ngenerate_pipeline([\n    step(parse, awk, 'parse.awk', []),\n    step(process, go, 'process', [parallel(4)]),\n    step(format, awk, 'format.awk', [])\n], Options, Script).\n```\n\nThe orchestrator automatically manages:\n- Detection of native binaries\n- On-demand compilation when needed\n- Proper pipe connections between different stage types\n- Caching of compiled binaries for reuse\n\nThis allows you to leverage shell tools for text processing while using compiled languages for performance-critical stages. For more on native binary orchestration and cross-compilation, see education/book-07-cross-target-glue/10_native_orchestration.md.", "answer_variant": "default", "answer_source": "education/book-07-cross-target-glue/10_native_orchestration.md", "topics": ["binary-management", "cross-compilation", "orchestration"], "original_answer": "## Native Binary Orchestration\n\n### Binary Management\n\n- Compilation on demand\n- Caching of compiled binaries\n- Version detection\n\n### Cross-Compilation\n\n```bash\n# Build for 5 platforms from one source\nGOOS=linux GOARCH=amd64 go build -o tool-linux-amd64\nGOOS=darwin GOARCH=arm64 go build -o tool-darwin-arm64\nGOOS=windows GOARCH=amd64 go build -o tool-windows.exe\n```\n\n### Mixed Pipelines\n\n```prolog\n% Shell + native in same pipeline\ngenerate_pipeline([\n    step(parse, awk, 'parse.awk', []),\n    step(process, go, 'process', [parallel(4)]),\n    step(format, awk, 'format.awk', [])\n], Options, Script).\n```\n\nThe orchestrator handles:\n- Binary detection\n- Compilation if needed\n- Pipe connections", "answer_tailored": true}
