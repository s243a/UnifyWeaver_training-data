{"pair_id": "production-001_p0", "cluster_id": "production-001", "question": "How do I configure TLS for UnifyWeaver services?", "question_type": "medium", "answer": "To configure TLS for UnifyWeaver services, use the `declare_service/2` predicate with TLS parameters and optionally define TLS policies with `declare_tls_config/2`:\n\n```prolog\n:- declare_service(api_service, [\n    host('api.example.com'),\n    port(8443),\n    transport(https),\n    tls_version('1.3'),\n    cert_file('/etc/ssl/cert.pem'),\n    key_file('/etc/ssl/key.pem')\n]).\n\n:- declare_tls_config(production, [\n    min_version('1.2'),\n    preferred_version('1.3'),\n    cipher_suites(['TLS_AES_256_GCM_SHA384']),\n    verify_peer(true)\n]).\n```\n\nSpecify `transport(https)` along with certificate paths and TLS version requirements in your service declaration. Services accessing remote endpoints without HTTPS will fail validation. For comprehensive security hardening guidelines, see education/book-08-security-firewall/06_production_hardening.md.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Configure TLS in service declaration and with dedicated predicates:\n\n```prolog\n:- declare_service(api_service, [\n    host('api.example.com'),\n    port(8443),\n    transport(https),\n    tls_version('1.3'),\n    cert_file('/etc/ssl/cert.pem'),\n    key_file('/etc/ssl/key.pem')\n]).\n\n:- declare_tls_config(production, [\n    min_version('1.2'),\n    preferred_version('1.3'),\n    cipher_suites(['TLS_AES_256_GCM_SHA384']),\n    verify_peer(true)\n]).\n```\n\nRemote services without HTTPS will fail validation.", "answer_tailored": true}
{"pair_id": "production-001_p0", "cluster_id": "production-001", "question": "How do I manage secrets in UnifyWeaver?", "question_type": "medium", "answer": "UnifyWeaver provides multiple options for secret management. You can use `declare_secret/3` to specify where secrets come from:\n\n**Environment Variables:**\n```prolog\n:- declare_secret(api_service, api_key, [\n    source(env('API_KEY')),\n    redact_in_logs(true)\n]).\n```\n\n**External Secret Stores:**\n\nHashiCorp Vault:\n```prolog\n:- declare_secret(api_service, db_password, [\n    source(vault('secret/data/database', 'password')),\n    vault_addr('https://vault.example.com:8200')\n]).\n```\n\nAWS Secrets Manager:\n```prolog\n:- declare_secret(api_service, api_key, [\n    source(aws_secrets('prod/api-key')),\n    region('us-west-2')\n]).\n```\n\nAzure Key Vault and GCP Secret Manager are also supported. For production hardening best practices, see education/book-08-security-firewall/06_production_hardening.md.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Secrets can come from environment variables or external stores:\n\n```prolog\n% Environment variable\n:- declare_secret(api_service, api_key, [\n    source(env('API_KEY')),\n    redact_in_logs(true)\n]).\n\n% HashiCorp Vault\n:- declare_secret(api_service, db_password, [\n    source(vault('secret/data/database', 'password')),\n    vault_addr('https://vault.example.com:8200')\n]).\n\n% AWS Secrets Manager\n:- declare_secret(api_service, api_key, [\n    source(aws_secrets('prod/api-key')),\n    region('us-west-2')\n]).\n```\n\nAlso supports Azure Key Vault and GCP Secret Manager.", "answer_tailored": true}
{"pair_id": "production-002_p0", "cluster_id": "production-002", "question": "How do I configure health checks and monitoring?", "question_type": "medium", "answer": "To configure health checks and monitoring in UnifyWeaver, use the health check, metrics, and logging declarations:\n\n```prolog\n% Define health check endpoints\n:- declare_health_check(api_service, [\n    endpoint('/health'),\n    interval(30),\n    timeout(5),\n    healthy_threshold(2),\n    unhealthy_threshold(3)\n]).\n\n% Set up Prometheus metrics collection\n:- declare_metrics(api_service, [\n    format(prometheus),\n    endpoint('/metrics'),\n    include([requests_total, request_duration_seconds])\n]).\n\n% Configure structured logging with sensitive data redaction\n:- declare_logging(api_service, [\n    format(json),\n    level(info),\n    redact([password, api_key, token])\n]).\n```\n\nThe health check configuration sets up automated endpoint monitoring with customizable intervals and thresholds. Metrics integration provides Prometheus-compatible monitoring data. Structured JSON logging automatically redacts sensitive fields. For more details on production hardening, see education/book-08-security-firewall/06_production_hardening.md.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Configure health checks, metrics, and logging:\n\n```prolog\n% Health checks\n:- declare_health_check(api_service, [\n    endpoint('/health'),\n    interval(30),\n    timeout(5),\n    healthy_threshold(2),\n    unhealthy_threshold(3)\n]).\n\n% Prometheus metrics\n:- declare_metrics(api_service, [\n    format(prometheus),\n    endpoint('/metrics'),\n    include([requests_total, request_duration_seconds])\n]).\n\n% Structured logging\n:- declare_logging(api_service, [\n    format(json),\n    level(info),\n    redact([password, api_key, token])\n]).\n```", "answer_tailored": true}
{"pair_id": "production-002_p0", "cluster_id": "production-002", "question": "How do I configure alerting in UnifyWeaver?", "question_type": "medium", "answer": "To configure alerting in UnifyWeaver, use `declare_alert/3` predicates that specify the service name, alert identifier, and configuration options including trigger conditions, time thresholds, severity levels, and notification targets:\n\n```prolog\n:- declare_alert(api_service, high_error_rate, [\n    condition(error_rate > 0.05),  % Trigger when errors exceed 5%\n    duration('5m'),\n    severity(critical),\n    notify([pagerduty, slack])\n]).\n\n:- declare_alert(api_service, high_latency, [\n    condition(p99_latency > 500),  % Trigger when p99 latency exceeds 500ms\n    duration('10m'),\n    severity(warning),\n    notify([slack])\n]).\n\n:- declare_alert(api_service, unhealthy, [\n    condition(health_status == unhealthy),\n    duration('1m'),\n    severity(critical),\n    notify([pagerduty, email])\n]).\n```\n\nEach alert defines when to trigger (condition), how long the condition must persist (duration), the alert priority (severity), and which channels receive notifications (notify). For production hardening details, see education/book-08-security-firewall/06_production_hardening.md.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Declare alerts with conditions, duration, severity, and notification channels:\n\n```prolog\n:- declare_alert(api_service, high_error_rate, [\n    condition(error_rate > 0.05),  % >5% errors\n    duration('5m'),\n    severity(critical),\n    notify([pagerduty, slack])\n]).\n\n:- declare_alert(api_service, high_latency, [\n    condition(p99_latency > 500),  % >500ms p99\n    duration('10m'),\n    severity(warning),\n    notify([slack])\n]).\n\n:- declare_alert(api_service, unhealthy, [\n    condition(health_status == unhealthy),\n    duration('1m'),\n    severity(critical),\n    notify([pagerduty, email])\n]).\n```", "answer_tailored": true}
{"pair_id": "production-003_p0", "cluster_id": "production-003", "question": "How do I configure resource limits and rate limiting?", "question_type": "medium", "answer": "Resource limits and rate limiting are configured through Prolog declarations that control system resources and request throttling:\n\n```prolog\n% Define resource constraints\n:- declare_resource_limits(api_service, [\n    memory_limit('512Mi'),\n    memory_request('256Mi'),\n    cpu_limit('1000m'),        % 1 CPU\n    cpu_request('250m')\n]).\n\n% Set connection boundaries\n:- declare_connection_limits(api_service, [\n    max_connections(1000),\n    connection_timeout(30),\n    idle_timeout(300),\n    max_request_size('10Mi')\n]).\n\n% Configure rate throttling\n:- declare_rate_limit(api_service, [\n    requests_per_second(100),\n    burst(150),\n    by(client_ip),\n    on_exceed(return_429)\n]).\n```\n\nThe `declare_resource_limits/2` controls memory and CPU allocation, `declare_connection_limits/2` manages connection behavior and request size, and `declare_rate_limit/2` implements request throttling per client IP with burst handling. For production hardening details, see education/book-08-security-firewall/06_production_hardening.md.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Set resource limits and rate limiting for protection:\n\n```prolog\n% Resource limits\n:- declare_resource_limits(api_service, [\n    memory_limit('512Mi'),\n    memory_request('256Mi'),\n    cpu_limit('1000m'),        % 1 CPU\n    cpu_request('250m')\n]).\n\n% Connection limits\n:- declare_connection_limits(api_service, [\n    max_connections(1000),\n    connection_timeout(30),\n    idle_timeout(300),\n    max_request_size('10Mi')\n]).\n\n% Rate limiting\n:- declare_rate_limit(api_service, [\n    requests_per_second(100),\n    burst(150),\n    by(client_ip),\n    on_exceed(return_429)\n]).\n```", "answer_tailored": true}
{"pair_id": "production-003_p0", "cluster_id": "production-003", "question": "What is the production deployment security checklist?", "question_type": "medium", "answer": "For production deployment, ensure the following security measures are in place:\n\n**Transport Layer:**\n- Enable HTTPS for all remote service endpoints\n- Enforce TLS 1.2 or higher with strong cipher suites only\n- Implement automatic certificate renewal to prevent expiration\n\n**Secrets Management:**\n- Store all secrets in an external vault system (never in code or configuration files)\n- Configure automatic secret rotation\n- Use mutual TLS (mTLS) for service-to-service authentication\n\n**Network Controls:**\n- Apply network policies with default-deny rules\n- Restrict egress traffic to necessary destinations only\n- Configure rate limiting to prevent abuse\n\n**Observability:**\n- Set up health check endpoints\n- Export metrics for monitoring systems\n- Configure alerts for critical security and operational conditions\n\n**Resilience:**\n- Define retry policies with exponential backoff\n- Implement circuit breakers to prevent cascading failures\n- Establish fallback mechanisms for degraded operation\n\nSee education/book-08-security-firewall/06_production_hardening.md for complete deployment hardening guidance.", "answer_variant": "default", "answer_source": "book-08-security-firewall/06_production_hardening.md", "topics": [], "original_answer": "Production checklist:\n\n**Transport Security:**\n- HTTPS enabled for all remote services\n- TLS 1.2+ enforced\n- Strong cipher suites\n- Automatic certificate renewal\n\n**Authentication & Secrets:**\n- Secrets in external vault\n- No secrets in code/config\n- Secret rotation configured\n- Service-to-service mTLS\n\n**Network Security:**\n- Network policies with default deny\n- Egress restricted\n- Rate limiting configured\n\n**Monitoring:**\n- Health checks configured\n- Metrics exported\n- Alerts for critical conditions\n\n**Error Handling:**\n- Retry policies\n- Circuit breakers\n- Fallbacks defined", "answer_tailored": true}
