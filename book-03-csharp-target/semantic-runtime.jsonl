{"cluster_id": "semantic-crawling", "seed_level": 3, "source_files": ["education/book-03-csharp-target/05_semantic_crawling.md"], "topics": ["semantic", "crawling", "embeddings", "onnx"], "questions": ["What is semantic crawling in UnifyWeaver?", "How does the semantic runtime work?", "What is OnnxEmbeddingProvider?", "How does focused crawling work?"], "answer": {"text": "## Semantic Crawling\n\nUnlike traditional crawlers, semantic crawlers use **vector embeddings** to understand content meaning.\n\n### Architecture Components\n\n1. **`PtCrawler`**: Orchestrator - fetches and parses content\n2. **`PtImporter`**: Storage - wraps LiteDB for objects + embeddings\n3. **`OnnxEmbeddingProvider`**: Brain - runs local ONNX transformer model\n4. **`PtSearcher`**: Retriever - cosine similarity search\n\n### Data Flow\n\n```\nSource (XML/HTTP) → PtCrawler → OnnxEmbeddingProvider\n                            ↓\n              Object + Vector → PtImporter/LiteDB\n                            ↓\nUser Query → PtSearcher → Vector Similarity → Results\n```\n\n### Configuring the Embedder\n\n```csharp\nvar embedder = new OnnxEmbeddingProvider(\n    modelPath: \"models/model.onnx\",\n    vocabPath: \"models/vocab.txt\"\n);\n```\n\n### Focused Crawling\n\n1. **Seed**: Start with topic category\n2. **Crawl**: Fetch children, embed titles\n3. **Filter**: Only follow if `CosineSimilarity > 0.4`\n4. **Store**: Save relevant pages\n\nCreates highly focused datasets without downloading everything.", "anchor_question_hash": "03f1a2b3c4d50001"}}
{"cluster_id": "vector-search", "seed_level": 3, "source_files": ["education/book-03-csharp-target/05_semantic_crawling.md"], "topics": ["vector-search", "embeddings", "cosine-similarity", "litedb"], "questions": ["How does vector search work in UnifyWeaver?", "What is cosine similarity search?", "How do I search embedded data?", "What model is used for embeddings?"], "answer": {"text": "## Vector Search\n\nFind documents **conceptually similar** to your query, not just keyword matches.\n\n### Performing a Search\n\n```csharp\nvar searcher = new PtSearcher(\"data.db\", embedder);\nvar results = searcher.SearchSimilar(\n    \"quantum physics applications\",\n    topK: 5\n);\n\nforeach (var result in results)\n{\n    Console.WriteLine($\"{result.Score:F4}: {result.Title}\");\n}\n```\n\n### Embedding Model\n\nDefault: `all-MiniLM-L6-v2`\n- 384-dimensional vectors\n- From HuggingFace sentence-transformers\n- Runs locally via ONNX Runtime\n\n### How It Works\n\n1. Query text → Embedder → 384-dim vector\n2. Compare to stored vectors using cosine similarity\n3. Return top-K most similar documents\n\n### Prolog Definition\n\n```prolog\nfind_relevant_seeds(Query, Seeds) :-\n    semantic_search(Query, 10, Results),\n    extract_ids(Results, Seeds).\n\ncrawl_topic(Topic) :-\n    find_relevant_seeds(Topic, Seeds),\n    crawler_run(Seeds, 3).  % Depth 3\n```", "anchor_question_hash": "03f2a3b4c5d60002"}}
{"cluster_id": "powershell-semantic", "seed_level": 3, "source_files": ["education/book-03-csharp-target/06_powershell_semantic.md"], "topics": ["powershell", "xml", "vector", "dotnet"], "questions": ["What is the PowerShell Semantic Target?", "How does PowerShell handle XML streaming?", "How does vector search work in PowerShell?", "When should I use PowerShell vs C#?"], "answer": {"text": "## PowerShell Semantic Target\n\nBridges Prolog logic with .NET ecosystem on Windows.\n\n**Python:** \"Scripted AI\"\n**PowerShell:** \"Enterprise Integration\"\n\n### XML Streaming with .NET\n\n```powershell\nfunction Get-XmlStream {\n    param($Path, $Tags)\n    $reader = [System.Xml.XmlReader]::Create($Path)\n    try {\n        while ($reader.Read()) {\n            if ($reader.NodeType -eq 'Element' -and\n                $Tags -contains $reader.Name) {\n                $subReader = $reader.ReadSubtree()\n                $doc = [System.Xml.XmlDocument]::new()\n                $doc.Load($subReader)\n                # Emit to pipeline\n                @{ 'tag' = $doc.DocumentElement.Name }\n            }\n        }\n    } finally {\n        $reader.Dispose()\n    }\n}\n```\n\n### Vector Search Strategies\n\n**Strategy A: Pure PowerShell (< 10k items)**\n```powershell\nfunction Get-CosineSimilarity ($v1, $v2) {\n    $dot = 0.0; $mag1 = 0.0; $mag2 = 0.0\n    for ($i = 0; $i -lt $v1.Count; $i++) {\n        $dot += $v1[$i] * $v2[$i]\n        $mag1 += $v1[$i] * $v1[$i]\n        $mag2 += $v2[$i] * $v2[$i]\n    }\n    return $dot / ([Math]::Sqrt($mag1) * [Math]::Sqrt($mag2))\n}\n```\n\n**Strategy B: ONNX Runtime (Production)**\n```powershell\nAdd-Type -Path \"bin/Microsoft.ML.OnnxRuntime.dll\"\n$session = [Microsoft.ML.OnnxRuntime.InferenceSession]::new(\"model.onnx\")\n```", "anchor_question_hash": "03f3a4b5c6d70003"}}
