{"cluster_id": "typescript-target-001", "question": "How do I compile Prolog predicates to TypeScript?", "answer": "Use the TypeScript target module:\n\n```prolog\n?- use_module('src/unifyweaver/targets/typescript_target').\n\n% Tail recursion\n?- compile_recursion(sum/3, [pattern(tail_recursion)], Code).\n\n% List fold\n?- compile_recursion(listSum/2, [pattern(list_fold)], Code).\n\n% Memoized recursion\n?- compile_recursion(fib/2, [pattern(linear_recursion)], Code).\n\n% Multi-function module\n?- compile_module(\n       [pred(sum, 2, tail_recursion),\n        pred(fib, 2, linear_recursion)],\n       [module_name('PrologMath')],\n       Code).\n```\n\n**Run:**\n```bash\nnpx tsc Sum.ts\nnode -e \"const { sum } = require('./Sum'); console.log(sum(100));\"\n```", "source_file": "other-books/book-typescript-target/01_introduction.md", "prerequisites": []}
{"cluster_id": "typescript-target-001", "question": "What recursion patterns does the TypeScript target support?", "answer": "Three main patterns:\n\n**1. Tail Recursion** (with strict loop version):\n```typescript\nexport const sum = (n: number, acc: number = 0): number => {\n  if (n <= 0) return acc;\n  return sum(n - 1, acc + n);\n};\n\n// Strict version for guaranteed TCO\nexport const sumStrict = (n: number, acc: number = 0): number => {\n  let current = n;\n  let result = acc;\n  while (current > 0) {\n    result += current;\n    current--;\n  }\n  return result;\n};\n```\n\n**2. List Fold** (using reduce):\n```typescript\nexport const listSum = (items: number[]): number => {\n  return items.reduce((acc, item) => acc + item, 0);\n};\n```\n\n**3. Linear Recursion** (memoized):\n```typescript\nconst fibMemo = new Map<number, number>();\n\nexport const fib = (n: number): number => {\n  if (n <= 0) return 0;\n  if (n === 1) return 1;\n  \n  if (fibMemo.has(n)) return fibMemo.get(n)!;\n  \n  const result = fib(n - 1) + fib(n - 2);\n  fibMemo.set(n, result);\n  return result;\n};\n```", "source_file": "other-books/book-typescript-target/02_recursion.md", "prerequisites": ["typescript-target-001"]}
{"cluster_id": "typescript-target-001", "question": "How do I select the right JavaScript runtime?", "answer": "Use the js_glue module for runtime selection:\n\n```prolog\n?- use_module('src/unifyweaver/glue/js_glue').\n\n?- js_runtime_choice([typescript, secure], Runtime).\nRuntime = deno.\n\n?- js_runtime_choice([npm], Runtime).\nRuntime = node.\n\n?- js_runtime_choice([dom], Runtime).\nRuntime = browser.\n\n?- js_runtime_choice([fast, bundled], Runtime).\nRuntime = bun.\n```\n\n**Runtime features:**\n| Runtime | Best For |\n|---------|----------|\n| Node.js | Server-side, npm ecosystem |\n| Deno | TypeScript-first, security |\n| Bun | Performance, fast startup |\n| Browser | Web apps, DOM, React/Vue |\n\n**Auto-select pattern:**\n```prolog\nauto_compile(Pred, Features, Code) :-\n    js_runtime_choice(Features, Runtime),\n    compile_recursion(Pred, [runtime(Runtime)], Code).\n```", "source_file": "other-books/book-typescript-target/03_runtimes.md", "prerequisites": ["typescript-target-001"]}
