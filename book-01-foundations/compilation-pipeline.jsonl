{"cluster_id": "compilation-pipeline", "seed_level": 2, "source_files": ["education/book-01-foundations/03_unifyweaver_architecture.md", "docs/ARCHITECTURE.md"], "topics": ["architecture", "compilation", "pipeline", "recursive-compiler", "stream-compiler", "template-system"], "questions": ["How does the UnifyWeaver compilation pipeline work?", "What are the core modules in UnifyWeaver?", "How does UnifyWeaver classify predicates?", "What is the difference between stream_compiler and recursive_compiler?"], "answer": {"text": "## Compilation Pipeline\n\n```\n┌──────────────────┐\n│ Prolog Predicate │\n└────────┬─────────┘\n         │\n         ▼\n┌──────────────────┐\n│ Classify Pattern │  (recursive_compiler.pl)\n└────────┬─────────┘\n         │\n    ┌────┴────┐\n    │         │\n    ▼         ▼\n┌────────┐  ┌─────────────────────┐\n│Non-Rec │  │ Recursive           │\n│stream  │  │ advanced_recursive  │\n└────────┘  └─────────────────────┘\n         │\n         ▼\n┌──────────────────────────────────┐\n│ Analyze Constraints & Options    │\n└────────────────┬─────────────────┘\n                 │\n                 ▼\n┌──────────────────────────────────┐\n│ Select & Render Template         │\n└────────────────┬─────────────────┘\n                 │\n                 ▼\n        ┌────────────────┐\n        │ Generated Code │\n        └────────────────┘\n```\n\n## Core Modules\n\n```prolog\n% Module structure\nsrc/unifyweaver/core/\n├── template_system.pl      % Template rendering engine\n├── stream_compiler.pl      % Non-recursive predicates\n├── recursive_compiler.pl   % Main dispatcher\n├── constraint_analyzer.pl  % unique, ordered constraints\n└── advanced/\n    ├── advanced_recursive_compiler.pl\n    ├── tail_recursion.pl\n    ├── linear_recursion.pl\n    └── mutual_recursion.pl\n```\n\n## Classification\n\n```prolog\n% recursive_compiler dispatches based on pattern:\n% - Facts only → stream_compiler\n% - Non-recursive rules → stream_compiler  \n% - Tail recursion → tail_recursion.pl\n% - Linear recursion → linear_recursion.pl\n% - Mutual recursion → mutual_recursion.pl (SCC detection)\n```\n\n## Example: Compiling a Predicate\n\n```prolog\n?- use_module(unifyweaver(core/compiler_driver)).\n?- compile(ancestor/2, [target(bash)], Scripts).\n\n% Output:\n=== Compiling ancestor/2 ===\n  Constraints: [unique(true)]\nType: linear_recursion\nScripts: ['output/ancestor.sh']\n```", "anchor_question_hash": "a22bd2cdd5c01abd"}}
